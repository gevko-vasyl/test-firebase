(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"38EF":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var l,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie-card">\r\n    <img class="movie-poster" width="100px" src=https://image.tmdb.org/t/p/w500'+c("function"==typeof(l=null!=(l=u(n,"poster_path")||(null!=t?u(t,"poster_path"):t))?l:i)?l.call(r,{name:"poster_path",hash:{},data:o,loc:{start:{line:3,column:79},end:{line:3,column:94}}}):l)+' alt="'+c("function"==typeof(l=null!=(l=u(n,"title")||(null!=t?u(t,"title"):t))?l:i)?l.call(r,{name:"title",hash:{},data:o,loc:{start:{line:3,column:100},end:{line:3,column:109}}}):l)+'" data-movie-id="'+c("function"==typeof(l=null!=(l=u(n,"id")||(null!=t?u(t,"id"):t))?l:i)?l.call(r,{name:"id",hash:{},data:o,loc:{start:{line:3,column:126},end:{line:3,column:132}}}):l)+'">\r\n    <h1 class="movie-title">'+c("function"==typeof(l=null!=(l=u(n,"title")||(null!=t?u(t,"title"):t))?l:i)?l.call(r,{name:"title",hash:{},data:o,loc:{start:{line:4,column:28},end:{line:4,column:37}}}):l)+"</h1>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:6,column:9}}}))?l:""},useData:!0})},L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("L1EO");var a={gallery:document.querySelector(".gallery"),home:document.getElementById("home"),library:document.getElementById("library"),watched:document.getElementById("watched"),queue:document.getElementById("queue"),lightBox:document.querySelector(".lightbox")},o=n("SzhR"),l=(n("VwVG"),n("SHTW"),document.querySelector("#sign_in")),r=document.querySelector("#sign_out"),i=document.querySelector(".user-info");function c(e){return o.a.database().ref("/users/"+e).once("value")}o.a.initializeApp({apiKey:"AIzaSyB_XQuuXpnCVMzsoH_tRJd_Re2w7D-8sJE",authDomain:"test-ec373.firebaseapp.com",databaseURL:"https://test-ec373-default-rtdb.firebaseio.com",projectId:"test-ec373",storageBucket:"test-ec373.appspot.com",messagingSenderId:"655424318049",appId:"1:655424318049:web:e8ade1934133d874e6d820",measurementId:"G-RN92T8LBYY"}),l.addEventListener("click",(function(){var e=new o.a.auth.GoogleAuthProvider;o.a.auth().signInWithPopup(e).then((function(e){e.credential.accessToken;var t=e.user,n=t.uid,a=t.displayName,l=t.email,r=t.photoURL;console.log(t),console.log("Success!"),function(){var e=o.a.auth().currentUser.uid;return o.a.database().ref("/users/"+e).once("value")}().then((function(e){e.exists()?(console.log("User exist in database"),c(n)):(console.log("User NOT exist in database"),function(e,t,n,a){o.a.database().ref("users/"+e).set({username:t,email:n,profile_picture:a},(function(e){e?console.log("FAILED!!!"):console.log("SUCCESS")}))}(n,a,l,r))}))})).catch((function(e){e.code;var t=e.message;e.email,e.credential;console.log(t),console.log("Failed!")}))})),r.addEventListener("click",(function(){o.a.auth().signOut().then((function(){console.log("Sign-out successful."),window.location.href="index.html",i.innerHTML=""})).catch((function(e){console.log("ERRROR!")}))}));n("JBxO"),n("FdtR");var u=n("38EF"),s=n.n(u);function d(){return fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&page=1").then((function(e){return e.json()})).then((function(e){var t=e.results;a.gallery.innerHTML=s()(t)})).catch((function(e){return console.log(e)}))}n("hi3g"),n("IvQZ"),n("4NM0");function h(e,t){o.a.database().ref("users/"+e).update({watched:t},(function(e){e?console.log("FAIL!"):console.log("DATA UPDATE SUCCESSFULLY")}))}n("uQK7"),n("/YXa"),n("lmye"),n("Xlt+"),n("WoWj"),n("U00V"),n("wcNg");var f=n("ZQRB"),p=n.n(f);function m(){o.a.auth().currentUser&&c(o.a.auth().currentUser.uid).then((function(e){return e.val()})).then(function(){var e=v(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.watched){e.next=7;break}return n=t.watched,e.next=4,Promise.all(n.map(function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/"+t+"?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&");case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:a=e.sent,console.log(a),a.map((function(e){b([{id:e.id,title:e.title,poster_path:e.poster_path}])}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error")})),a.watched.setAttribute("disabled","true"),a.queue.removeAttribute("disabled")}function g(e,t,n,a,o,l,r){try{var i=e[l](r),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var l=e.apply(t,n);function r(e){g(l,a,o,r,i,"next",e)}function i(e){g(l,a,o,r,i,"throw",e)}r(void 0)}))}}function b(e){var t=p()(e);a.gallery.insertAdjacentHTML("beforeend",t)}o.a.auth().onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.photoURL,a=(e.email,e.uid);i.innerHTML='<img class="user-img" src="'+n+'">\n           <p>'+t+"</p>",console.log("Current user: "+t,"userId: "+a),c(a)}else i.innerHTML=""})),d(),a.gallery.addEventListener("click",(function(e){if("IMG"===e.target.nodeName){a.lightBox.classList.add("is-open");var t=e.target.dataset.movieId;localStorage.setItem("firebase-id",t);var n=a.lightBox.querySelector("#add-watched");console.log(n),function(e){e.textContent="ADD TO WATCHED",e.removeAttribute("disabled");var t=o.a.auth().currentUser;if(t){var n=t.uid,a=localStorage.getItem("firebase-id");console.log(a),c(n).then((function(e){return e.val()})).then((function(t){(t.watched||[]).includes(a)&&(e.classList.add="inactive-btn-style",e.textContent="ALREADY IN WATCHED",e.setAttribute("disabled","true"))}))}}(n)}})),a.gallery.addEventListener("click",(function(e){if(e.target.classList.contains("del-movie-btn")){var t=e.target.id;localStorage.setItem("firebase-id",t),console.log("Hello"),function(){var e=o.a.auth().currentUser;if(e){a.gallery.innerHTML="";var t=e.uid,n=localStorage.getItem("firebase-id");c(t).then((function(e){return e.val()})).then((function(e){if(e.watched){var a=e.watched||[];if(a.includes(n)){var o=a.indexOf(n);a.splice(o,1),console.log("NEW WATCHED",a)}h(t,[].concat(a));m()}})),console.log(watched)}}()}})),a.lightBox.addEventListener("click",(function(e){"lightbox__overlay"===e.target.className&&a.lightBox.classList.remove("is-open"),"add-watched"===e.target.id&&function(){var e=o.a.auth().currentUser;if(console.log(e),e){var t=e.uid,n=localStorage.getItem("firebase-id");console.log(n),c(t).then((function(e){return e.val()})).then((function(e){var a=e.watched||[];a.includes(n)||h(t,[].concat(a,[n]))}))}}()})),a.library.addEventListener("click",(function(){a.gallery.innerHTML="",a.watched.classList.remove("hide"),a.queue.classList.remove("hide"),a.watched.removeAttribute("disabled"),m()})),a.home.addEventListener("click",(function(){a.watched.classList.add("hide"),a.queue.classList.add("hide"),d()})),a.watched.addEventListener("click",m),a.queue.addEventListener("click",(function(){a.gallery.innerHTML="",a.watched.removeAttribute("disabled"),a.queue.setAttribute("disabled","true")}))},ZQRB:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var l,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="movie-card">\r\n    <img class="movie-poster" width="100px" src=https://image.tmdb.org/t/p/w500'+u(typeof(l=null!=(l=s(n,"poster_path")||(null!=t?s(t,"poster_path"):t))?l:i)===c?l.call(r,{name:"poster_path",hash:{},data:o,loc:{start:{line:3,column:79},end:{line:3,column:94}}}):l)+' alt="'+u(typeof(l=null!=(l=s(n,"title")||(null!=t?s(t,"title"):t))?l:i)===c?l.call(r,{name:"title",hash:{},data:o,loc:{start:{line:3,column:100},end:{line:3,column:109}}}):l)+'"\r\n        data-movie-id="'+u(typeof(l=null!=(l=s(n,"id")||(null!=t?s(t,"id"):t))?l:i)===c?l.call(r,{name:"id",hash:{},data:o,loc:{start:{line:4,column:23},end:{line:4,column:29}}}):l)+'">\r\n    <button class="del-movie-btn" id='+u(typeof(l=null!=(l=s(n,"id")||(null!=t?s(t,"id"):t))?l:i)===c?l.call(r,{name:"id",hash:{},data:o,loc:{start:{line:5,column:37},end:{line:5,column:43}}}):l)+'>x</button>\r\n    <h1 class="movie-title">'+u(typeof(l=null!=(l=s(n,"title")||(null!=t?s(t,"title"):t))?l:i)===c?l.call(r,{name:"title",hash:{},data:o,loc:{start:{line:6,column:28},end:{line:6,column:37}}}):l)+"</h1>\r\n</li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:8,column:9}}}))?l:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.dd1919a0e12ba5f432fa.js.map