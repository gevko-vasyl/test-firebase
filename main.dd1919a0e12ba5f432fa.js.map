{"version":3,"sources":["webpack:///./film-card.hbs","webpack:///./refs.js","webpack:///./firebase-auth.js","webpack:///./api.js","webpack:///./dataToFirebase.js","webpack:///./myLibrary.js","webpack:///./dataFromFirebase.js","webpack:///./index.js","webpack:///./library-film-card.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","refs","gallery","document","querySelector","home","getElementById","library","watched","queue","lightBox","signIn","signOut","userInfo","readUserData","userId","firebase","database","ref","once","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","addEventListener","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","user","uid","name","displayName","email","imageUrl","photoURL","console","log","currentUser","checkUserID","exists","set","username","profile_picture","error","writeUserData","catch","code","errorMessage","message","window","location","href","innerHTML","fetchSearchedMovie","fetch","response","json","results","updateWatchedList","movieId","update","renderWatched","val","watchedList","Promise","all","map","movieObject","movieObjects","updateMarkup","id","title","poster_path","setAttribute","removeAttribute","movie","markup","libraryFilmCard","insertAdjacentHTML","onAuthStateChanged","get","event","target","nodeName","classList","add","dataset","localStorage","setItem","button","textContent","getItem","includes","dataFromFirebase","contains","movieIndex","indexOf","splice","dataToFirebase","myLibrary","className","remove","alias3"],"mappings":"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","file":"main.dd1919a0e12ba5f432fa.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movie-card\\\">\\r\\n    <img class=\\\"movie-poster\\\" width=\\\"100px\\\" src=https://image.tmdb.org/t/p/w500\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":79},\"end\":{\"line\":3,\"column\":94}}}) : helper)))\n    + \" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":100},\"end\":{\"line\":3,\"column\":109}}}) : helper)))\n    + \"\\\" data-movie-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":126},\"end\":{\"line\":3,\"column\":132}}}) : helper)))\n    + \"\\\">\\r\\n    <h1 class=\\\"movie-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":28},\"end\":{\"line\":4,\"column\":37}}}) : helper)))\n    + \"</h1>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":6,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const refs = {\r\n    gallery : document.querySelector('.gallery'),\r\n    home: document.getElementById('home'),\r\n    library : document.getElementById('library'),\r\n    watched :document.getElementById('watched'),\r\n    queue :document.getElementById('queue'),\r\n    lightBox :document.querySelector('.lightbox'),  \r\n}\r\n\r\nexport default refs","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB_XQuuXpnCVMzsoH_tRJd_Re2w7D-8sJE\",\r\n  authDomain: \"test-ec373.firebaseapp.com\",\r\n  databaseURL: \"https://test-ec373-default-rtdb.firebaseio.com\",\r\n  projectId: \"test-ec373\",\r\n  storageBucket: \"test-ec373.appspot.com\",\r\n  messagingSenderId: \"655424318049\",\r\n  appId: \"1:655424318049:web:e8ade1934133d874e6d820\",\r\n  measurementId: \"G-RN92T8LBYY\"\r\n};\r\n\r\nconst signIn = document.querySelector('#sign_in');\r\nconst signOut = document.querySelector('#sign_out');\r\nconst userInfo = document.querySelector('.user-info');\r\n\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nsignIn.addEventListener('click', googleSignIn);\r\nsignOut.addEventListener('click', googleSignOut);\r\n\r\nfunction initApp() {\r\n    firebase.auth().onAuthStateChanged(function (user) {\r\n        if (user) {\r\n            // SIGN IN\r\n            const displayName = user.displayName;\r\n            const photoURL = user.photoURL;\r\n            const email = user.email;\r\n            const uid = user.uid;\r\n            userInfo.innerHTML = `<img class=\"user-img\" src=\"${photoURL}\">\r\n           <p>${displayName}</p>`;\r\n            console.log(`Current user: ${displayName}`, `userId: ${uid}`);\r\n            readUserData(uid)\r\n        } else {\r\n            // SIGN OUT\r\n            userInfo.innerHTML = '';\r\n        }\r\n    \r\n    })\r\n};\r\n\r\nfunction googleSignIn() {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase.auth().signInWithPopup(provider)\r\n        .then((result) => {\r\n            const credential = result.credential;\r\n            // This gives you a Google Access Token. You can use it to access the Google API. \r\n            const token = credential.accessToken;\r\n            // The signed-in user info.\r\n            const user = result.user;\r\n            const userId = user.uid;\r\n            const name = user.displayName;\r\n            const email = user.email;\r\n            const imageUrl = user.photoURL;\r\n\r\n            console.log(user);\r\n            console.log(\"Success!\");\r\n            \r\n            // Перевірка чи є вже юзер в БД, якшо неа то добавляє\r\n            checkUserID().then((data) => {\r\n                if (data.exists()) {\r\n                    console.log('User exist in database');\r\n                    // Завантажує данні з БД\r\n                    readUserData(userId);\r\n                } else {\r\n                    console.log('User NOT exist in database');\r\n                    writeUserData(userId, name, email, imageUrl);\r\n                }\r\n            });\r\n\r\n        }).catch((error) => {\r\n            // Handle Errors here.\r\n            const errorCode = error.code;\r\n            const errorMessage = error.message;\r\n            // The email of the user's account used.\r\n            const email = error.email;\r\n            // The firebase.auth.AuthCredential type that was used.\r\n            const credential = error.credential;\r\n            console.log(errorMessage);\r\n            console.log(\"Failed!\");\r\n        });\r\n};\r\n\r\nfunction googleSignOut() {\r\n    firebase.auth().signOut().then(() => {\r\n        console.log('Sign-out successful.');\r\n        window.location.href = 'index.html';\r\n        userInfo.innerHTML = '';\r\n\r\n    }).catch((error) => {\r\n        console.log('ERRROR!');\r\n    });\r\n};\r\n\r\n// ОТРИМУЄ ДАННІ ЮЗЕРА ПО АЙДІ З БД\r\nfunction checkUserID() {\r\n    const userId = firebase.auth().currentUser.uid;\r\n    return firebase.database().ref('/users/' + userId).once('value');\r\n};\r\n\r\n// ЗАПИСУЄ ОСНОВНУ ІНФУ ПО ЮЗЕР В БД, ТІЛЬКИ ПРИ РЕЄСТРАЦІЇ ПЕРШОМУ ВХОДІ\r\n\r\nfunction writeUserData(userId, name, email, imageUrl) {\r\n    firebase.database().ref('users/' + userId).set({\r\n        username: name,\r\n        email: email,\r\n        profile_picture : imageUrl\r\n    }, (error) => {\r\n        if (error) {\r\n            console.log('FAILED!!!');\r\n        } else {\r\n            console.log('SUCCESS');\r\n        };\r\n            \r\n    });\r\n};\r\n\r\nfunction readUserData(userId) {\r\n    return firebase.database().ref('/users/' + userId).once('value');\r\n}\r\n\r\nexport {initApp, readUserData, checkUserID}","import template from './film-card.hbs'\r\nimport refs from './refs.js'\r\n\r\nconst apiKey = \"api_key=50b81e1c6c3b9e5f74d2015b742ff0b0\";\r\n\r\n//ЗАПИТ ДЛЯ РЕНДЕРУ ГАЛЕРЕЇ \r\nfunction fetchSearchedMovie() {\r\n    const url = `https://api.themoviedb.org/3/trending/movie/week?${apiKey}&page=1`;\r\n  \r\n    return fetch(url)\r\n        .then(response => response.json())\r\n        .then(({ results }) => {\r\n            refs.gallery.innerHTML = template(results);\r\n        })\r\n        .catch(error => console.log(error));\r\n}\r\n\r\n// function fetchOneMovie(movie_id) {\r\n//     const url = `https://api.themoviedb.org/3/movie/${movie_id}?${apiKey}`;\r\n//     return fetch(url)\r\n//         .then(response => response.json())\r\n//         .catch(error => console.log(error));\r\n// }\r\n\r\n\r\n\r\nexport { fetchSearchedMovie };\r\n","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport * as auth from './firebase-auth.js'\r\n\r\n//ЗБЕРЕЖЕННЯ АЙДІШНІКА В БД\r\nfunction addToWatch() {\r\n    const currentUser = firebase.auth().currentUser;\r\n        console.log(currentUser);\r\n        if (currentUser) {\r\n            let uid = currentUser.uid;\r\n            let movieId = localStorage.getItem('firebase-id');\r\n            console.log(movieId);\r\n            auth.readUserData(uid)\r\n                .then((data) => data.val())\r\n                .then((data) => {\r\n                    let watched = data.watched || [];\r\n                        if (watched.includes(movieId)) {\r\n                            return\r\n                        }\r\n                        updateWatchedList(uid, [...watched, movieId]);\r\n                    })\r\n\r\n        }\r\n        \r\n}\r\n\r\n\r\n//ФУНКЦІЯ ДЛЯ ОНОВЛЕННЯ СПИСКУ АЙДІШНІКІВ В БД\r\nfunction updateWatchedList(userId, movieId) {\r\n    firebase.database().ref('users/' + userId).update({\r\n        watched: movieId,\r\n    }, (error) => {\r\n        if (error) {\r\n            console.log('FAIL!')\r\n        } else {\r\n            console.log('DATA UPDATE SUCCESSFULLY')\r\n        };\r\n    });\r\n}\r\nexport {addToWatch,  updateWatchedList}","import refs from './refs.js'\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport * as dataFromFirebase from './dataFromFirebase.js'\r\n\r\n\r\n//ПОКАЗУЄ БІБЛІОТЕКУ ФІЛЬМІВ\r\nfunction showMyLibrary() {\r\n    refs.gallery.innerHTML = '';\r\n    refs.watched.classList.remove('hide');\r\n    refs.queue.classList.remove('hide');\r\n    refs.watched.removeAttribute('disabled');\r\n    renderWatched();\r\n};\r\n\r\n// РЕНДЕР ПЕРЕГЛЯНУТИХ ПО АЙДІШНИКАХ З БД\r\nfunction renderWatched() {\r\n    if (firebase.auth().currentUser) {\r\n        dataFromFirebase.getMoviesWatched(firebase.auth().currentUser.uid);\r\n    }\r\n    refs.watched.setAttribute('disabled', 'true');\r\n    refs.queue.removeAttribute('disabled');\r\n};\r\n\r\n// РЕНДЕР ТИХ ШО В ЧЕРЗІ ПО АЙДІШНИКАХ З БД\r\nfunction renderQueue() {\r\n    refs.gallery.innerHTML = '';\r\n    refs.watched.removeAttribute('disabled');\r\n    refs.queue.setAttribute('disabled', 'true');\r\n};\r\n\r\n\r\n\r\nexport {renderWatched, renderQueue,showMyLibrary}","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\nimport libraryFilmCard from './library-film-card.hbs';\r\nimport refs from './refs.js';\r\nimport * as auth from './firebase-auth.js';\r\nimport * as dataToFirebase from './dataToFirebase.js';\r\nimport * as myLibrary from './myLibrary.js';\r\n\r\n\r\n//ФУКНЦІЯ ЯКА ПЕРЕВІРЯЄ ЧИ Є В БД АЙДІШНИК ПО ЯКОМУ КЛІКНУЛИ\r\n//І РОБИТЬ ВІДПОВІДНІ СТИЛІ ДЛЯ КНОПОК\r\nfunction setModalBtnStyles(button) {\r\n    button.textContent = 'ADD TO WATCHED'\r\n    button.removeAttribute('disabled');\r\n    const currentUser = firebase.auth().currentUser;\r\n    if (currentUser) {\r\n        let uid = currentUser.uid;\r\n        let movieId = localStorage.getItem('firebase-id');\r\n        console.log(movieId);\r\n        auth.readUserData(uid)\r\n            .then((data) => data.val())\r\n            .then((data) => {\r\n                let watched = data.watched || [];\r\n\r\n                // if(!watched.includes(movieId)) {\r\n                //     button.textContent = 'ADD TO WATCHED'\r\n                //     button.setAttribute('disabled', 'false');\r\n                    \r\n                // }\r\n\r\n                if (watched.includes(movieId)) {\r\n                    button.classList.add=('inactive-btn-style')\r\n                    button.textContent = 'ALREADY IN WATCHED'\r\n                    button.setAttribute('disabled', 'true');\r\n\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\n// ФУНКЦІЯ ДЛЯ ЩОБ ОТРИМАТИ АЙДІШНИКИ З БД І ПО НИМ ЗРОБИТИ ЗАПИТ НА СЕРВЕР\r\n// ТА ВІД РЕНДЕРИТИ РОЗМІТКУ ПО ОТРИМАНИХ ДАННИХ\r\nfunction getMoviesWatched(uid) {\r\n    auth.readUserData(uid)\r\n        .then((data) => data.val())\r\n        .then(async(data) => {\r\n            if (data.watched) {\r\n                let watchedList = data.watched;\r\n                let movieObjects = await Promise.all(\r\n                    watchedList.map(async movieId => {\r\n                        let movieObject = await fetch(\r\n                            `https://api.themoviedb.org/3/movie/${movieId}?api_key=50b81e1c6c3b9e5f74d2015b742ff0b0&`,\r\n                        );\r\n                        return movieObject.json();\r\n                    }),\r\n                )\r\n\r\n                console.log(movieObjects);\r\n                movieObjects.map(({ id, title, poster_path }) => {\r\n                    const movie = [{ id, title, poster_path }];\r\n                    updateMarkup(movie);\r\n                });\r\n                \r\n            }\r\n        }).catch((error)=>console.log(\"error\"))\r\n}\r\n\r\n\r\n// ФУНКЦІЯ ЯКА ЧИСТИТЬ РОЗМІТКУ\r\n// ВИДАЛЯЄ АЙДІШНИК ФІЛЬМА НА ЯКОМУ КЛІКНУЛИ КНОПКУ З БД\r\n// І РЕНДЕРИТЬ НОВУ РОЗМІТКУ ПО АЙДІШНИКАХ ЯКІ ЛИШИЛИСЬ В БД\r\nfunction removeFromWatch() {\r\n    const currentUser = firebase.auth().currentUser;\r\n    if (currentUser) {\r\n        refs.gallery.innerHTML = '';\r\n        let uid = currentUser.uid;\r\n        let movieId = localStorage.getItem('firebase-id');\r\n        auth.readUserData(uid)\r\n        .then((data) => data.val())\r\n        .then((data) => {\r\n            if (data.watched) {\r\n                let watched = data.watched || [];\r\n                if (watched.includes(movieId)) {\r\n                    let movieIndex = watched.indexOf(movieId)\r\n                    watched.splice(movieIndex, 1);\r\n                    console.log('NEW WATCHED', watched)\r\n                };\r\n                const updateList = dataToFirebase.updateWatchedList(uid, [...watched]);\r\n                myLibrary.renderWatched();\r\n            }\r\n        })\r\n        console.log(watched);\r\n    }\r\n\r\n}\r\n\r\n//РЕНДЕР РОЗМІТКИ ПО ШАБЛОНУ\r\nfunction updateMarkup(movie) {\r\n    let markup = libraryFilmCard(movie);;\r\n    refs.gallery.insertAdjacentHTML('beforeend',markup) ;\r\n};\r\n\r\n\r\n\r\n\r\nexport {getMoviesWatched,removeFromWatch, setModalBtnStyles,}","import './styles.css';\r\nimport refs from './refs.js'\r\nimport * as auth from './firebase-auth.js'\r\nimport * as get from './api.js'\r\nimport * as dataToFirebase from './dataToFirebase.js'\r\nimport * as dataFromFirebase from './dataFromFirebase.js'\r\nimport * as myLibrary from './myLibrary.js'\r\n\r\nauth.initApp();\r\nget.fetchSearchedMovie();\r\n\r\nrefs.gallery.addEventListener('click', (event) => {\r\n    if (event.target.nodeName !== 'IMG') {\r\n    return\r\n    }\r\n    refs.lightBox.classList.add('is-open')\r\n    let movieId = event.target.dataset.movieId;\r\n    localStorage.setItem('firebase-id', movieId)\r\n    const button = refs.lightBox.querySelector('#add-watched')\r\n    console.log(button);\r\n    dataFromFirebase.setModalBtnStyles(button)\r\n});\r\n\r\nrefs.gallery.addEventListener(\"click\", (event) => {\r\n    if (event.target.classList.contains(\"del-movie-btn\")) {\r\n        let movieId = event.target.id;\r\n        localStorage.setItem('firebase-id', movieId)\r\n        console.log(\"Hello\")\r\n        dataFromFirebase.removeFromWatch();\r\n\r\n    }\r\n});\r\n\r\nrefs.lightBox.addEventListener('click', (event) => {\r\n    if (event.target.className === 'lightbox__overlay') {\r\n        refs.lightBox.classList.remove('is-open');\r\n    };\r\n\r\n    if (event.target.id === 'add-watched') {\r\n        dataToFirebase.addToWatch();\r\n    }\r\n\r\n    // if (event.target.id === 'remove-watched') {\r\n    //     dataFromFirebase.removeFromWatch();\r\n    //     dataFromFirebase.renderWatched();\r\n    // }\r\n})\r\n\r\n\r\n\r\nrefs.library.addEventListener('click', myLibrary.showMyLibrary);\r\n\r\n\r\nrefs.home.addEventListener('click', () => {\r\n    refs.watched.classList.add('hide');\r\n    refs.queue.classList.add('hide');\r\n    get.fetchSearchedMovie()\r\n});\r\n\r\nrefs.watched.addEventListener('click', myLibrary.renderWatched);\r\nrefs.queue.addEventListener('click', myLibrary.renderQueue);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// function switcher() {\r\n    // const elements = document.querySelectorAll('.watch-js')\r\n    // for (let el of elements) {\r\n    //     if (el.classList.contains('hide')) {\r\n    //         el.classList.remove('hide');\r\n    //     } else {\r\n    //         el.classList.add('hide');\r\n    //     }\r\n    // }\r\n// }\r\n\r\n","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movie-card\\\">\\r\\n    <img class=\\\"movie-poster\\\" width=\\\"100px\\\" src=https://image.tmdb.org/t/p/w500\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"poster_path\") || (depth0 != null ? lookupProperty(depth0,\"poster_path\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"poster_path\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":79},\"end\":{\"line\":3,\"column\":94}}}) : helper)))\n    + \" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":100},\"end\":{\"line\":3,\"column\":109}}}) : helper)))\n    + \"\\\"\\r\\n        data-movie-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":23},\"end\":{\"line\":4,\"column\":29}}}) : helper)))\n    + \"\\\">\\r\\n    <button class=\\\"del-movie-btn\\\" id=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":37},\"end\":{\"line\":5,\"column\":43}}}) : helper)))\n    + \">x</button>\\r\\n    <h1 class=\\\"movie-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":28},\"end\":{\"line\":6,\"column\":37}}}) : helper)))\n    + \"</h1>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":8,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}